{% import "_includes/forms" as forms %}

{% includeCssResource 'supertable/css/SuperTableInput.css' %}

<input type="hidden" name="{{ name }}" value="">

<div class="superTableContainer">
    <table id="{{ id }}" class="shadow-box editable superTable">
        <thead>
            <tr>
				{% if table %}
					{% for field in table.getFields() %}
						<th scope="col" class="header">{{ field.name }}</th>
					{% endfor %}
				{% endif %}

                <th class="header" colspan="2"></th>
            </tr>
        </thead>
        <tbody>
        	{% for block in blocks %}
				{% set blockId = block.id %}

				{% if not blockId %}
					{% set totalNewBlocks = totalNewBlocks + 1 %}
					{% set blockId = 'new'~totalNewBlocks %}
				{% endif %}

        		<tr data-id="{{ blockId }}">
					<input type="hidden" name="{{ name }}[{{ blockId }}][type]" value="{{ block.getType() }}">
					
					{% include "supertable/fields" with {
						namespace: name~'['~blockId~'][fields]',
						element: block,
						fields: block.getType().getFieldLayout().getFields(),
						static: static
					} %}

                    <td class="thin action"><a class="move icon" title="{{ 'Reorder'|t }}"></a></td>
                    <td class="thin action"><a class="delete icon" title="{{ 'Delete'|t }}"></a></td>
                </tr>
			{% endfor %}
        </tbody>
    </table>

    <div class="btn add icon">{{ "Add a row"|t }}</div>
</div>


